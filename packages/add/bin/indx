#!/usr/bin/env node

import { downloadFile } from '../src/utils.js';

// Get command from command line arguments
const command = process.argv[2];

if (!command) {
  console.log('Manifest CLI - Manage Manifest files');
  console.log('');
  console.log('Usage: npx manifestjs-add <command>');
  console.log('');
  console.log('Commands:');
  console.log('  update                    Update all Manifest files (except theme)');
  console.log('  js                        Download manifest.js');
  console.log('  css                       Download manifest.css');
  console.log('  theme                     Download manifest.theme.css');
  console.log('  code                      Download manifest.code.css');
  console.log('  quickstart                Download manifest.quickstart.js');
  console.log('');
  console.log('Examples:');
  console.log('  npx manifestjs-add update');
  console.log('  npx manifestjs-add js');
  console.log('  npx manifestjs-add css');
  process.exit(1);
}

// Map commands to filenames
const fileMap = {
  'js': 'manifest.js',
  'css': 'manifest.css',
  'theme': 'manifest.theme.css',
  'code': 'manifest.code.css',
  'quickstart': 'manifest.quickstart.js'
};

if (command === 'update') {
  // Import and run the update command
  const { runUpdate } = await import('../src/update.js');
  await runUpdate();
} else if (fileMap[command]) {
  // Download the specific file
  await downloadFile(fileMap[command]);
} else {
  console.error(`Unknown command: ${command}`);
  console.log('Run "npx manifestjs-add" to see available commands.');
  process.exit(1);
}
